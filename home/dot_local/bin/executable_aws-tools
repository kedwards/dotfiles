#!/usr/bin/env bash
set -euo pipefail

usage() {
  cat <<EOF
aws-tools

Commands:
  assume <profile>
  whoami
  env
EOF
}

case "${1:-}" in
  assume)
    shift
    eval "$(store-credentials "$1")"
    ;;
  whoami)
    aws sts get-caller-identity
    ;;
  env)
    env | grep '^AWS_'
    ;;
  *)
    usage
    ;;
esac
